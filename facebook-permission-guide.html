<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook App Permissions Setup Guide</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .step { background: #f5f5f5; padding: 15px; margin: 10px 0; border-left: 4px solid #1877f2; }
        .warning { background: #fff3cd; padding: 15px; margin: 10px 0; border-left: 4px solid #ffc107; }
        .success { background: #d4edda; padding: 15px; margin: 10px 0; border-left: 4px solid #28a745; }  
        .code { background: #f8f9fa; padding: 10px; font-family: monospace; margin: 10px 0; }
        .button { background: #1877f2; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>ðŸ”§ Facebook App Permissions Setup for PingJob</h1>
    
    <div class="warning">
        <strong>Current Issue:</strong> Your Facebook token works but lacks the required permissions for posting to pages. 
        The API returns: "requires both pages_read_engagement and pages_manage_posts permission"
    </div>

    <h2>ðŸ“‹ Required Steps to Fix Facebook Posting</h2>

    <div class="step">
        <h3>Step 1: Go to Facebook App Dashboard</h3>
        <p>Visit: <a href="https://developers.facebook.com/apps/" target="_blank" class="button">Facebook App Dashboard</a></p>
        <p>Select your PingJob app that you're using for this integration.</p>
    </div>

    <div class="step">
        <h3>Step 2: Add Required Permissions</h3>
        <p>In your app dashboard, go to <strong>App Review > Permissions and Features</strong></p>
        <p>Request the following permissions:</p>
        <ul>
            <li><strong>pages_manage_posts</strong> - Allows posting to pages you manage</li>
            <li><strong>pages_read_engagement</strong> - Allows reading page insights and engagement</li>
        </ul>
    </div>

    <div class="step">
        <h3>Step 3: Submit for Review (Production Apps)</h3>
        <p>For production use, Facebook requires app review for these permissions:</p>
        <ul>
            <li>Fill out the "App Review" form explaining why you need to post jobs to Facebook</li>
            <li>Provide screenshots showing the job posting functionality</li>
            <li>Wait for Facebook approval (usually 1-7 days)</li>
        </ul>
    </div>

    <div class="step">
        <h3>Step 4: Development/Testing Alternative</h3>
        <p>For immediate testing, you can:</p>
        <ul>
            <li>Add your Facebook account as a "Test User" or "App Admin" in the app settings</li>
            <li>Generate a new page access token with the required permissions from the <a href="https://developers.facebook.com/tools/explorer/" target="_blank">Graph API Explorer</a></li>
            <li>Make sure to select both permissions when generating the token</li>
        </ul>
    </div>

    <div class="success">
        <h3>âœ… Good News: Your Integration is Ready!</h3>
        <p>The PingJob system is fully configured and ready for Facebook posting. Once you get a token with the right permissions, job postings will automatically appear on your Facebook page when you create or edit jobs in the admin panel.</p>
    </div>

    <h2>ðŸ”„ Quick Token Generation Steps</h2>
    <div class="step">
        <ol>
            <li>Go to <a href="https://developers.facebook.com/tools/explorer/" target="_blank">Facebook Graph API Explorer</a></li>
            <li>Select your PingJob app from the dropdown</li>
            <li>Click "Generate Access Token"</li>
            <li>Select these permissions:
                <div class="code">
                pages_manage_posts<br>
                pages_read_engagement<br>
                pages_show_list
                </div>
            </li>
            <li>Get the page access token (not user token)</li>
            <li>Update your Replit secrets with the new token</li>
        </ol>
    </div>

    <div class="warning">
        <strong>Note:</strong> Development tokens expire quickly. For production use, you'll need to complete the Facebook App Review process or implement token refresh logic.
    </div>

    <h2>ðŸ“ž Need Help?</h2>
    <p>If you need assistance with the Facebook App Review process or token generation, the system is ready - you just need the proper permissions from Facebook.</p>
</body>
</html>