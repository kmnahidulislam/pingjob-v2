<!DOCTYPE html>
<html>
<head>
    <title>Logo Display Test</title>
</head>
<body>
    <h1>Logo Display Test - Direct from API</h1>
    
    <div id="results"></div>

    <script>
        async function testLogos() {
            try {
                const response = await fetch('/api/companies/top');
                const companies = await response.json();
                
                const resultsDiv = document.getElementById('results');
                resultsDiv.innerHTML = '<h2>API Response Test</h2>';
                
                companies.slice(0, 5).forEach(company => {
                    const div = document.createElement('div');
                    div.style.marginBottom = '20px';
                    div.style.border = '1px solid #ccc';
                    div.style.padding = '10px';
                    
                    const logoUrl = company.logoUrl ? `/${company.logoUrl.replace(/ /g, '%20')}` : null;
                    
                    div.innerHTML = `
                        <h3>${company.name}</h3>
                        <p>Raw logoUrl: ${company.logoUrl || 'NULL'}</p>
                        <p>Processed URL: ${logoUrl || 'NULL'}</p>
                        ${logoUrl ? `<img src="${logoUrl}" alt="${company.name}" style="width: 100px; height: 80px; border: 1px solid #000;" onload="console.log('Loaded: ${company.name}')" onerror="console.log('Failed: ${company.name}, URL: ${logoUrl}')">` : '<p>No logo URL</p>'}
                    `;
                    
                    resultsDiv.appendChild(div);
                });
            } catch (error) {
                console.error('API test failed:', error);
                document.getElementById('results').innerHTML = '<p>Failed to fetch API data</p>';
            }
        }
        
        testLogos();
    </script>
</body>
</html>